import{c as B,r as n,j as e,b as E,d as L,L as g}from"./index-WpJvKgqq.js";import{u as _}from"./useBrands-CDPoW7rD.js";import{u as M}from"./useProducts-Dx4zUwWl.js";import{S as A,A as D}from"./sparkles-DHcii853.js";import{S as I}from"./star-BdYsq3_X.js";const T=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],P=B("x",T),y=a=>a.toLocaleString("en-IN",{maximumFractionDigits:0}),$=(a,d)=>{if(!a||!d||a<=d)return null;const o=Math.round((a-d)/a*100);return o>0?o:null},q=()=>{const{data:a,isLoading:d}=_(),{data:o,isLoading:C}=M(),[m,p]=n.useState(""),[i,b]=n.useState([]),c=n.useMemo(()=>(Array.isArray(a)?a:[]).filter(s=>s.is_active),[a]),f=n.useMemo(()=>(Array.isArray(o)?o:[]).filter(s=>s.is_active),[o]),k=n.useMemo(()=>{const t=m.trim().toLowerCase();return t?c.filter(s=>s.name.toLowerCase().includes(t)):c},[c,m]),w=n.useMemo(()=>c.filter(t=>i.includes(t.id)),[c,i]),u=n.useMemo(()=>i.length===0?[]:f.filter(t=>i.includes(t.brand?.id)),[f,i]),j=n.useMemo(()=>{const t=new Map;u.forEach(r=>{const l=r.category?.slug||"unknown-category";t.has(l)||t.set(l,{category:r.category,items:[]}),t.get(l).items.push(r)});const s=Array.from(t.values()).sort((r,l)=>r.category.name.localeCompare(l.category.name));return s.forEach(r=>{r.items.sort((l,h)=>new Date(h.created_at).getTime()-new Date(l.created_at).getTime())}),s},[u]),N=t=>{b(s=>s.includes(t)?s.filter(r=>r!==t):[...s,t])},v=()=>b([]),x=d||C;return e.jsxs("div",{className:"min-h-screen bg-[#0B0B0D] text-white",children:[e.jsxs("section",{className:"relative overflow-hidden border-b border-white/10",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute -top-32 -left-32 h-96 w-96 rounded-full bg-red-500/20 blur-3xl"}),e.jsx("div",{className:"absolute -bottom-32 -right-32 h-96 w-96 rounded-full bg-white/10 blur-3xl"}),e.jsx("div",{className:"absolute inset-0 bg-linear-to-b from-white/5 to-transparent"})]}),e.jsx("div",{className:"absolute inset-0 bg-[url('/banner1.jpg')] bg-cover bg-center bg-no-repeat"}),e.jsx("div",{className:"relative mx-auto  max-w-7xl px-4 py-10 md:py-14",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("p",{className:"inline-flex w-fit items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-2 text-xs font-medium text-white/80",children:[e.jsx(A,{className:"w-4 h-4 text-[#E02C2C]"}),"Top Brands • Premium Picks"]}),e.jsx("h1",{className:"text-2xl md:text-4xl font-medium tracking-tight",children:"Shop by Brands"}),e.jsx("p",{className:"max-w-2xl text-sm md:text-base text-white/70",children:"Select one or multiple brands and explore products grouped by category — a clean premium browsing experience."}),e.jsxs("div",{className:"mt-5 flex flex-col md:flex-row gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 backdrop-blur-xl shadow-xl w-full md:max-w-lg",children:[e.jsx(E,{className:"w-5 h-5 text-white/60"}),e.jsx("input",{value:m,onChange:t=>p(t.target.value),placeholder:"Search brand name...",className:"w-full bg-transparent outline-none text-sm placeholder:text-white/40"}),m.trim()&&e.jsx("button",{onClick:()=>p(""),className:"rounded-full border border-white/10 bg-black/30 px-3 py-1 text-xs font-bold text-white/80 hover:bg-white/10 transition",children:"Clear"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:v,className:"inline-flex items-center justify-center gap-2 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-xs font-medium text-white hover:bg-white/10 transition",children:[e.jsx(P,{className:"w-4 h-4"}),"Clear Selection"]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-xs font-medium text-white/70",children:["Selected:"," ",e.jsx("span",{className:"text-white",children:i.length})]})]})]}),w.length>0&&e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:w.map(t=>e.jsxs("button",{onClick:()=>N(t.id),className:"group inline-flex items-center gap-2 rounded-full border border-white/10 bg-[#E02C2C]/20 px-4 py-2 text-xs font-medium text-white hover:bg-[#E02C2C]/30 transition",children:[e.jsx("span",{children:t.name}),e.jsx("span",{className:"opacity-80 group-hover:opacity-100",children:"✕"})]},t.id))})]})})]}),e.jsxs("section",{className:"mx-auto max-w-7xl px-4 py-10",children:[e.jsxs("div",{className:"flex items-end justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl font-medium",children:"Select Brands"}),e.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Tap logos to multi-select. No dropdowns."})]}),e.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-white/60",children:e.jsx("span",{className:"rounded-full border border-white/10 bg-white/5 px-3 py-1",children:"Tip: Select multiple brands"})})]}),d?e.jsx("div",{className:"mt-6 rounded-2xl border border-white/10 bg-white/5 p-6 text-white/70",children:"Loading brands..."}):e.jsx("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-8 gap-4",children:k.map(t=>{const s=i.includes(t.id);return e.jsxs("button",{onClick:()=>N(t.id),className:`group relative overflow-hidden rounded-2xl border p-4 transition text-left
                    ${s?"border-[#E02C2C] bg-[#E02C2C]/10":"border-white/10 bg-white/5 hover:bg-white/10"}
                  `,children:[e.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-100 transition ${s?"opacity-100":""}`,children:e.jsx("div",{className:"absolute -top-10 -left-10 h-40 w-40 rounded-full bg-red-500/20 blur-3xl"})}),e.jsxs("div",{className:"relative flex flex-col items-start gap-1",children:[e.jsx("div",{className:"flex items-center justify-between w-full",children:s&&e.jsx("span",{className:"rounded-full bg-[#E02C2C] px-3 py-1 text-[10px] font-medium text-white",children:"Selected"})}),e.jsx("div",{className:"h-18 w-full flex items-center justify-center rounded-xl border border-white/10 bg-black/30 overflow-hidden",children:t.logo?e.jsx("img",{src:t.logo,alt:t.name,className:"h-full w-full object-contain "}):e.jsx("span",{className:"text-xs text-white/50",children:t.name})}),e.jsx("p",{className:"text-sm font-medium leading-tight line-clamp-1",children:t.name}),e.jsxs("p",{className:"text-xs text-white/50",children:["Tap to ",s?"remove":"select"]})]})]},t.id)})})]}),e.jsxs("section",{className:"mx-auto max-w-7xl px-4 pb-14",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl font-medium",children:"Brand Products by Category"}),e.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Results are automatically grouped by category."})]}),e.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-white/60",children:e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1",children:[e.jsx(L,{className:"w-4 h-4"}),"Categories: ",j.length]})})]}),x&&e.jsx("div",{className:"mt-6 rounded-2xl border border-white/10 bg-white/5 p-6 text-white/70",children:"Loading products..."}),!x&&i.length===0&&e.jsxs("div",{className:"mt-6 rounded-2xl border border-white/10 bg-white/5 p-8 text-center",children:[e.jsx("p",{className:"text-lg font-medium",children:"Select a brand to view products"}),e.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Choose one or more brands above to load products categorized by leaf categories."})]}),!x&&i.length>0&&u.length===0&&e.jsxs("div",{className:"mt-6 rounded-2xl border border-white/10 bg-white/5 p-8 text-center",children:[e.jsx("p",{className:"text-lg font-medium",children:"No products found"}),e.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Try selecting different brands."}),e.jsx("button",{onClick:v,className:"mt-5 rounded-xl bg-[#E02C2C] px-5 py-3 text-sm font-bold hover:bg-[#B91C1C] transition",children:"Clear Selection"})]}),!x&&i.length>0&&j.map(t=>e.jsxs("div",{className:"mt-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base md:text-lg font-medium",children:[t.category.name,e.jsxs("span",{className:"ml-2 text-white/60 text-sm",children:["(",t.items.length,")"]})]}),t.category.full_path&&e.jsx("p",{className:"mt-1 text-xs text-white/50 line-clamp-1",children:t.category.full_path})]}),e.jsxs(g,{to:`/filter/${t.category.slug}`,className:"inline-flex items-center justify-center gap-2 rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-xs font-medium text-white hover:bg-white/10 transition w-fit",children:["View in Filter Page ",e.jsx(D,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"mt-5 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.items.slice(0,6).map(s=>{const r=Number(s.price)||0,l=s.old_price?Number(s.old_price):void 0,h=$(l,r),S=s.stock<=0;return e.jsxs(g,{to:`/product/${s.slug}`,className:"group rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 transition overflow-hidden",children:[e.jsxs("div",{className:"relative h-52 w-full bg-black/30 overflow-hidden",children:[e.jsx("img",{src:s.image||"https://via.placeholder.com/600x400?text=No+Image",alt:s.name,className:"h-full w-full object-cover group-hover:scale-105 transition duration-500"}),h!==null&&e.jsxs("div",{className:"absolute top-3 left-3 rounded-full bg-[#E02C2C] px-4 py-2 text-xs font-medium",children:[h,"% Off"]})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("p",{className:"text-xs text-white/60 font-semibold",children:s.brand?.name}),e.jsx("h4",{className:"mt-1 text-sm font-medium leading-snug line-clamp-2",children:s.name}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xl font-medium",children:["₹",y(r)]}),l&&e.jsxs("span",{className:"text-xs text-white/40 line-through",children:["₹",y(l)]})]}),e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-white/10 bg-black/30 px-3 py-1 text-xs font-bold text-white/80",children:[e.jsx(I,{className:"w-4 h-4 text-yellow-400"}),"4.2"]})]}),e.jsx("div",{className:"mt-3 text-xs",children:S?e.jsx("span",{className:"text-red-400 font-semibold",children:"Out of stock"}):e.jsxs("span",{className:"text-emerald-300 font-semibold",children:["In stock (",s.stock,")"]})}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{className:"w-full rounded-xl bg-[#E02C2C] px-4 py-3 text-sm font-medium text-white hover:bg-[#B91C1C] transition",children:"View Product"})})]})]},s.id)})}),t.items.length>6&&e.jsx("div",{className:"mt-5 flex justify-center",children:e.jsxs(g,{to:`/filter/${t.category.slug}`,className:"rounded-xl border border-white/10 bg-white/5 px-5 py-3 text-sm font-medium text-white hover:bg-white/10 transition",children:["View all ",t.items.length," products in"," ",t.category.name]})})]},t.category.slug))]})]})};export{q as default};
