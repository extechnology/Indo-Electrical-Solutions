import{r as l,j as e,d as I,e as T,L as B}from"./index-BIMCDR0N.js";import{u as D}from"./useBrands-DTtAH9hK.js";import{u as P}from"./useProducts-BQHYOwLu.js";import{u as O}from"./useBanners-y2kgeQJW.js";import{S as R}from"./sparkles-DYQ0FyXQ.js";import{X as $}from"./x-uxsEu6zd.js";import{A as z}from"./arrow-right-CrLldNu2.js";import{S as F}from"./star-Cnw3KxpE.js";const k=i=>i.toLocaleString("en-IN",{maximumFractionDigits:0}),H=(i,o)=>{if(!i||!o||i<=o)return null;const c=Math.round((i-o)/i*100);return c>0?c:null},K=()=>{const{data:i,isLoading:o}=D(),{data:c,isLoading:S}=P(),[p,E]=l.useState(!1);l.useEffect(()=>{const t=window.matchMedia("(max-width: 767px)"),s=()=>E(t.matches);return s(),t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[]);const{data:b=[]}=O(),x=l.useMemo(()=>{const t=p?"TOP_BRANDS_MOBILE":"TOP_BRANDS";return b?.find(s=>s.banner_type===t&&s.is_active)},[b,p]),[h,f]=l.useState(""),[n,w]=l.useState([]),m=l.useMemo(()=>(Array.isArray(i)?i:[]).filter(s=>s.is_active),[i]),j=l.useMemo(()=>(Array.isArray(c)?c:[]).filter(s=>s.is_active),[c]),L=l.useMemo(()=>{const t=h.trim().toLowerCase();return t?m.filter(s=>s.name.toLowerCase().includes(t)):m},[m,h]),N=l.useMemo(()=>m.filter(t=>n.includes(t.id)),[m,n]),g=l.useMemo(()=>n.length===0?[]:j.filter(t=>n.includes(t.brand?.id)),[j,n]),v=l.useMemo(()=>{const t=new Map;g.forEach(r=>{const a=r.category?.slug||"unknown-category";t.has(a)||t.set(a,{category:r.category,items:[]}),t.get(a).items.push(r)});const s=Array.from(t.values()).sort((r,a)=>r.category.name.localeCompare(a.category.name));return s.forEach(r=>{r.items.sort((a,d)=>new Date(d.created_at).getTime()-new Date(a.created_at).getTime())}),s},[g]),y=t=>{w(s=>s.includes(t)?s.filter(r=>r!==t):[...s,t])},C=()=>w([]),u=o||S,_="917664939393",M=t=>{const s=`Hi, I am interested in this product:

${t.name}

Product ID: ${t.id}`;return`https://wa.me/${_}?text=${encodeURIComponent(s)}`};return e.jsxs("div",{className:"min-h-screen bg-[#0B0B0D] text-white",children:[e.jsxs("section",{className:"relative overflow-hidden border-b border-white/10",children:[e.jsx("img",{src:x?.image||"/banner1.jpg",alt:x?.title||"Top Brands Banner",loading:"lazy",className:"absolute inset-0 h-full w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/55"}),e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("div",{className:"absolute -top-32 -left-32 h-96 w-96 rounded-full bg-red-500/20 blur-3xl"}),e.jsx("div",{className:"absolute -bottom-32 -right-32 h-96 w-96 rounded-full bg-white/10 blur-3xl"}),e.jsx("div",{className:"absolute inset-0 bg-linear-to-b from-white/5 to-transparent"})]}),e.jsx("div",{className:"relative z-10 mx-auto max-w-7xl px-4 py-10 md:py-14",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("p",{className:"inline-flex w-fit items-center gap-2 rounded-full border border-white/10 bg-white/5 px-4 py-2 text-xs font-medium text-white/80 backdrop-blur",children:[e.jsx(R,{className:"w-4 h-4 text-[#E02C2C]"}),"Top Brands • Premium Picks"]}),e.jsx("h1",{className:"text-2xl md:text-4xl font-medium tracking-tight text-white",children:x?.title||"Shop by Brands"}),e.jsx("p",{className:"max-w-2xl text-sm md:text-base text-white/70",children:x?.description||"Select one or multiple brands and explore products grouped by category — a clean premium browsing experience."}),e.jsxs("div",{className:"mt-5 flex flex-col gap-3 md:flex-row",children:[e.jsxs("div",{className:"flex w-full items-center gap-2 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 backdrop-blur-xl shadow-xl md:max-w-lg",children:[e.jsx(I,{className:"h-5 w-5 text-white/60"}),e.jsx("input",{value:h,onChange:t=>f(t.target.value),placeholder:"Search brand name...",className:"w-full bg-transparent text-sm text-white outline-none placeholder:text-white/40"}),h.trim()&&e.jsx("button",{onClick:()=>f(""),className:"rounded-full border border-white/10 bg-black/30 px-3 py-1 text-xs font-bold text-white/80 transition hover:bg-white/10",children:"Clear"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:C,className:"inline-flex items-center justify-center gap-2 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-xs font-medium text-white transition hover:bg-white/10",children:[e.jsx($,{className:"h-4 w-4"}),"Clear Selection"]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-xs font-medium text-white/70",children:["Selected:"," ",e.jsx("span",{className:"text-white",children:n.length})]})]})]}),N.length>0&&e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:N.map(t=>e.jsxs("button",{onClick:()=>y(t.id),className:"group inline-flex items-center gap-2 rounded-full border border-white/10 bg-[#E02C2C]/20 px-4 py-2 text-xs font-medium text-white transition hover:bg-[#E02C2C]/30",children:[e.jsx("span",{children:t.name}),e.jsx("span",{className:"opacity-80 group-hover:opacity-100",children:"✕"})]},t.id))})]})})]}),e.jsxs("section",{className:"mx-auto max-w-7xl px-4 py-10",children:[e.jsxs("div",{className:"flex items-end justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl font-medium",children:"Select Brands"}),e.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Tap logos to multi-select. No dropdowns."})]}),e.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-white/60",children:e.jsx("span",{className:"rounded-full border border-white/10 bg-white/5 px-3 py-1",children:"Tip: Select multiple brands"})})]}),o?e.jsx("div",{className:"mt-6 rounded-2xl border border-white/10 bg-white/5 p-6 text-white/70",children:"Loading brands..."}):e.jsx("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-8 gap-4",children:L.map(t=>{const s=n.includes(t.id);return e.jsxs("button",{onClick:()=>y(t.id),className:`group relative overflow-hidden rounded-2xl border p-4 transition text-left
                    ${s?"border-[#E02C2C] bg-[#E02C2C]/10":"border-white/10 bg-white/5 hover:bg-white/10"}
                  `,children:[e.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-100 transition ${s?"opacity-100":""}`,children:e.jsx("div",{className:"absolute -top-10 -left-10 h-40 w-40 rounded-full bg-red-500/20 blur-3xl"})}),e.jsxs("div",{className:"relative flex flex-col items-start gap-1",children:[e.jsx("div",{className:"flex items-center justify-between w-full",children:s&&e.jsx("span",{className:"rounded-full bg-[#E02C2C] px-3 py-1 text-[10px] font-medium text-white",children:"Selected"})}),e.jsx("div",{className:"h-18 w-full flex items-center justify-center rounded-xl border border-white/10 bg-black/30 overflow-hidden",children:t.logo?e.jsx("img",{src:t.logo,alt:t.name,className:"h-full w-full object-contain "}):e.jsx("span",{className:"text-xs text-white/50",children:t.name})}),e.jsx("p",{className:"text-sm font-medium leading-tight line-clamp-1",children:t.name}),e.jsxs("p",{className:"text-xs text-white/50",children:["Tap to ",s?"remove":"select"]})]})]},t.id)})})]}),e.jsxs("section",{className:"mx-auto max-w-7xl px-4 pb-14",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg md:text-xl font-medium",children:"Brand Products by Category"}),e.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Results are automatically grouped by category."})]}),e.jsx("div",{className:"hidden md:flex items-center gap-2 text-xs text-white/60",children:e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1",children:[e.jsx(T,{className:"w-4 h-4"}),"Categories: ",v.length]})})]}),u&&e.jsx("div",{className:"mt-6 rounded-2xl border border-white/10 bg-white/5 p-6 text-white/70",children:"Loading products..."}),!u&&n.length===0&&e.jsxs("div",{className:"mt-6 rounded-2xl border border-white/10 bg-white/5 p-8 text-center",children:[e.jsx("p",{className:"text-lg font-medium",children:"Select a brand to view products"}),e.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Choose one or more brands above to load products categorized by leaf categories."})]}),!u&&n.length>0&&g.length===0&&e.jsxs("div",{className:"mt-6 rounded-2xl border border-white/10 bg-white/5 p-8 text-center",children:[e.jsx("p",{className:"text-lg font-medium",children:"No products found"}),e.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Try selecting different brands."}),e.jsx("button",{onClick:C,className:"mt-5 rounded-xl bg-[#E02C2C] px-5 py-3 text-sm font-bold hover:bg-[#B91C1C] transition",children:"Clear Selection"})]}),!u&&n.length>0&&v.map(t=>e.jsxs("div",{className:"mt-10",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base md:text-lg font-medium",children:[t.category.name,e.jsxs("span",{className:"ml-2 text-white/60 text-sm",children:["(",t.items.length,")"]})]}),t.category.full_path&&e.jsx("p",{className:"mt-1 text-xs text-white/50 line-clamp-1",children:t.category.full_path})]}),e.jsxs(B,{to:`/filter/${t.category.slug}`,className:"inline-flex items-center justify-center gap-2 rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-xs font-medium text-white hover:bg-white/10 transition w-fit",children:["View in Filter Page ",e.jsx(z,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"mt-5 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.items.slice(0,6).map(s=>{const r=Number(s.price)||0,a=s.old_price?Number(s.old_price):void 0,d=H(a,r),A=s.stock<=0;return e.jsxs("div",{className:"group rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 transition overflow-hidden",children:[e.jsxs("div",{className:"relative flex justify-center items-center  w-full bg-white overflow-hidden",children:[e.jsx("img",{src:s.image||"https://via.placeholder.com/600x400?text=No+Image",alt:s.name,className:"h-72  object-cover group-hover:scale-105 transition duration-500"}),d!==null&&e.jsxs("div",{className:"absolute top-3 left-3 rounded-full bg-[#E02C2C] px-4 py-2 text-xs font-medium",children:[d,"% Off"]})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("p",{className:"text-xs text-white/60 font-semibold",children:s.brand?.name}),e.jsx("h4",{className:"mt-1 text-sm font-medium leading-snug line-clamp-2",children:s.name}),e.jsxs("div",{className:" flex items-center justify-between",children:[r!=null&&r>0&&e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[e.jsxs("span",{className:"text-2xl font-medium tracking-tight text-white",children:["₹",k(r)]}),!!a&&a>0&&e.jsxs("span",{className:"text-sm text-white/40 line-through",children:["₹",k(a)]}),d!=null&&d>0&&e.jsxs("span",{className:"rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs font-bold text-white",children:[d,"% Off"]})]}),e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-white/10 bg-black/30 px-3 py-1 text-xs font-bold text-white/80",children:[e.jsx(F,{className:"w-4 h-4 text-yellow-400"}),"4.2"]})]}),e.jsx("div",{className:"mt-3 text-xs",children:A?e.jsx("span",{className:"text-red-400 font-semibold",children:"Out of stock"}):e.jsxs("span",{className:"text-emerald-300 font-semibold",children:["In stock (",s.stock,")"]})}),e.jsx("div",{className:"mt-4",children:e.jsx("a",{href:M(s),target:"_blank",rel:"noopener noreferrer",className:"w-full rounded-xl bg-linear-to-r from-red-500/80 to-red-500/40 px-4 py-3 text-sm font-medium text-white hover:bg-[#B91C1C] transition",children:"Order Now"})})]})]},s.id)})}),t.items.length>6&&e.jsx("div",{className:"mt-5 flex justify-center",children:e.jsxs(B,{to:`/filter/${t.category.slug}`,className:"rounded-xl border border-white/10 bg-white/5 px-5 py-3 text-sm font-medium text-white hover:bg-white/10 transition",children:["View all ",t.items.length," products in"," ",t.category.name]})})]},t.category.slug))]})]})};export{K as default};
