import{h as I,r as l,j as t}from"./index-X1zJaB2O.js";import{u as q}from"./useProducts-6C4pdaId.js";import{u as O}from"./useBrands-Oq3bw0Ew.js";const P=n=>n.toLocaleString("en-IN",{maximumFractionDigits:0}),D=(n,i)=>{if(!n||!i||n<=i)return null;const x=Math.round((n-i)/n*100);return x>0?x:null},$=()=>{const{category:n}=I(),{data:i,isLoading:x}=q(),{data:p,isLoading:S}=O(),[h,f]=l.useState("All"),[g,j]=l.useState("All"),[c,y]=l.useState("All"),[m,A]=l.useState("All"),[_,R]=l.useState("All"),[a,B]=l.useState("Relevance"),b=l.useMemo(()=>Array.isArray(i)?i:[],[i]),d=l.useMemo(()=>n?b.filter(e=>e?.category?.slug===n):b,[b,n]),w=l.useMemo(()=>{const e=new Map;return d.forEach(r=>{r?.category?.slug&&e.set(r.category.slug,{name:r.category.name,slug:r.category.slug})}),[{name:"All",slug:"All"},...Array.from(e.values())]},[d]),L=l.useMemo(()=>{const e=Array.isArray(p)?p.filter(s=>s.is_active):[];return e.length?["All",...e.map(s=>s.name)]:["All",...Array.from(new Set(d.map(s=>s.brand?.name).filter(Boolean)))]},[p,d]),N=l.useMemo(()=>{let e=[...d];return h!=="All"&&(e=e.filter(r=>r.category?.slug===h)),g!=="All"&&(e=e.filter(r=>r.brand?.name===g)),c!=="All"&&(e=e.filter(r=>{const s=Number(r.price);return Number.isNaN(s)?!1:c==="Under 40k"?s<4e4:c==="40k - 70k"?s>=4e4&&s<=7e4:c==="70k+"?s>7e4:!0})),m!=="All"&&(e=e.filter(r=>{const s=Number(r.price),o=r.old_price?Number(r.old_price):0,u=D(o,s)??0;return m==="10%+"?u>=10:m==="20%+"?u>=20:!0})),e.sort((r,s)=>{const o=Number(r.price)||0,u=Number(s.price)||0;return a==="Relevance"?0:a==="Price: Low to High"?o-u:a==="Price: High to Low"?u-o:a==="Rating"?0:a==="Newest"?new Date(s.created_at).getTime()-new Date(r.created_at).getTime():0}),e},[d,h,g,_,c,m,a]),M=N.length,C=()=>{f("All"),j("All"),y("All"),A("All"),R("All"),B("Relevance")};l.useEffect(()=>{f("All")},[n]);const k=l.useMemo(()=>n?w.find(r=>r.slug===n)?.name||n:"Products",[n,w]),v=x||S,H="917664939393",E=e=>{const r=`Hi, I am interested in this product:

${e.name}

Product ID: ${e.id}`;return`https://wa.me/${H}?text=${encodeURIComponent(r)}`};return t.jsx("div",{className:"min-h-screen bg-[#0B0B0D] text-white",children:t.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-6",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-white/60",children:[t.jsx("span",{className:"hover:text-white transition cursor-pointer",children:"Home"}),t.jsx("span",{className:"text-white/30",children:"›"}),t.jsx("span",{className:"hover:text-white transition cursor-pointer",children:"Categories"}),t.jsx("span",{className:"text-white/30",children:"›"}),t.jsx("span",{className:"text-white font-semibold",children:k})]}),t.jsx("div",{className:"mt-2 flex items-end justify-between gap-4",children:t.jsx("div",{children:t.jsxs("h1",{className:"text-2xl md:text-3xl font-medium tracking-tight capitalize",children:[k," ",t.jsxs("span",{className:"text-white/60 text-sm",children:["(",M,")"]})]})})}),t.jsxs("div",{className:"mt-5 flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx("select",{value:h,onChange:e=>f(e.target.value),className:"cursor-pointer rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-xs font-semibold text-white outline-none hover:bg-white/10 transition",children:w.map(e=>t.jsxs("option",{value:e.slug,className:"bg-[#0B0B0D]",children:["Categories: ",e.name]},e.slug))}),t.jsx("select",{value:g,onChange:e=>j(e.target.value),className:"cursor-pointer rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-xs font-semibold text-white outline-none hover:bg-white/10 transition",children:L.map(e=>t.jsxs("option",{value:e,className:"bg-[#0B0B0D]",children:["Brand: ",e]},e))}),t.jsx("select",{value:c,onChange:e=>y(e.target.value),className:"cursor-pointer rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-xs font-semibold text-white outline-none hover:bg-white/10 transition",children:["All","Under 40k","40k - 70k","70k+"].map(e=>t.jsxs("option",{value:e,className:"bg-[#0B0B0D]",children:["Price: ",e]},e))}),t.jsx("select",{value:m,onChange:e=>A(e.target.value),className:"cursor-pointer rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-xs font-semibold text-white outline-none hover:bg-white/10 transition",children:["All","10%+","20%+"].map(e=>t.jsxs("option",{value:e,className:"bg-[#0B0B0D]",children:["Discount: ",e]},e))}),t.jsx("button",{onClick:C,className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-xs font-semibold text-white hover:bg-white/10 transition",children:"Clear Filters"})]}),t.jsx("div",{className:"flex items-center justify-between gap-3 lg:justify-end",children:t.jsx("select",{value:a,onChange:e=>B(e.target.value),className:"cursor-pointer rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-xs font-semibold text-white outline-none hover:bg-white/10 transition",children:["Relevance","Price: Low to High","Price: High to Low","Rating","Newest"].map(e=>t.jsxs("option",{value:e,className:"bg-[#0B0B0D]",children:["Sort By ",e]},e))})})]}),v&&t.jsx("div",{className:"mt-10 rounded-2xl border border-white/10 bg-white/5 p-8 text-center",children:t.jsx("p",{className:"text-sm text-white/70",children:"Loading products..."})}),!v&&t.jsx("div",{className:"mt-8 grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-4",children:N.map(e=>{const r=Number(e.price)||0,s=e.old_price?Number(e.old_price):void 0,o=D(s,r);return t.jsxs("div",{className:"group relative flex h-full flex-col rounded-xl border border-white/10 bg-white/5 p-4 transition hover:bg-white/10",children:[t.jsx("div",{className:"relative h-[240px] overflow-hidden rounded-lg bg-white p-5",children:t.jsx("img",{src:e.image||"https://via.placeholder.com/400x400?text=No+Image",alt:e.name,className:"h-full w-full object-contain transition duration-300 group-hover:scale-[1.03]",loading:"lazy"})}),t.jsxs("div",{className:"mt-4 flex flex-1 flex-col",children:[t.jsx("h3",{className:"text-sm font-medium leading-snug text-white line-clamp-2",children:e.name}),t.jsxs("div",{className:"mt-2 text-xs text-white/50",children:[t.jsx("span",{className:"font-semibold text-white/70",children:e.brand?.name})," ","•"," ",t.jsx("span",{className:"text-white/60",children:e.category?.name})]}),e.description?.trim()?t.jsxs("div",{className:"relative mt-2",children:[t.jsx("p",{className:"text-xs text-white/50 line-clamp-2",children:e.description}),t.jsx("div",{className:`\r
        pointer-events-none absolute left-0 bottom-full z-30 mb-2 w-full\r
        opacity-0 translate-y-1 transition\r
        group-hover:opacity-100 group-hover:translate-y-0\r
      `,children:t.jsx("div",{className:"rounded-lg border border-white/10 bg-black/80 p-3 text-xs text-white/90 backdrop-blur-md shadow-lg",children:t.jsx("p",{className:"leading-relaxed",children:e.description})})})]}):t.jsx("div",{className:"mt-2 h-[32px]"}),r&&t.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3",children:[t.jsxs("span",{className:"text-2xl font-medium tracking-tight text-white",children:["₹",P(r)]}),!!s&&t.jsxs("span",{className:"text-sm text-white/40 line-through",children:["₹",P(s)]}),o!==null&&t.jsxs("span",{className:"rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs font-bold text-white",children:[o,"% Off"]})]}),e.min_order_quantity&&t.jsxs("span",{className:"mt-2 text-xs text-white/50",children:["Min Order Quantity: ",e.min_order_quantity]}),t.jsx("div",{className:"mt-auto pt-5",children:t.jsx("a",{href:E(e),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center rounded-full bg-emerald-200 px-4 py-2 text-xs font-extrabold text-black transition hover:scale-[1.03] active:scale-[0.98]",children:"Order Now"})}),t.jsx("div",{className:"mt-6 h-px w-full bg-white/10"})]})]},e.id)})}),!v&&N.length===0&&t.jsxs("div",{className:"mt-10 rounded-2xl border border-white/10 bg-white/5 p-8 text-center",children:[t.jsx("p",{className:"text-lg font-extrabold",children:"No products found"}),t.jsx("p",{className:"mt-2 text-sm text-white/60",children:"Try adjusting filters or clear all filters to see items."}),t.jsx("button",{onClick:C,className:"mt-5 rounded-xl bg-[#E02C2C] px-5 py-3 text-sm font-bold hover:bg-[#B91C1C] transition",children:"Clear Filters"})]})]})})};export{$ as default};
